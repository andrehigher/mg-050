function createRectsX(e){var t=d3.scale.linear().domain([1,e.length]).range([0,width-120]);createScaleX();createScaleY();svg.selectAll("rect").data(e).enter().append("rect").attr("x",function(e){return t(e[1])+20}).attr("y",50).attr("width",function(n){return t(width/e.length)-15}).attr("height",50).attr("fill",function(e){if(e[6]==="A"){return"#228B22"}if(e[6]==="B"){return"#66CD00"}if(e[6]==="C"){return"#FFD700"}if(e[6]==="D"){return"#FF7F00"}if(e[6]==="E"){return"#EE0000"}if(e[6]==="F"){return"#8B0000"}}).on("mouseover",function(e){div.transition().duration(200).style("opacity",.9);div.html("<br>Km Inicial: "+e[3]+"<br>Km Final: "+e[4]+"<br>Pista "+e[5]).style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(e){div.transition().duration(500).style("opacity",0)});svg.append("rect").attr("x",1120).attr("y",155).attr("width",80).attr("height",20).attr("fill","#228B22");svg.append("rect").attr("x",1120).attr("y",175).attr("width",80).attr("height",20).attr("fill","#66CD00");svg.append("rect").attr("x",1120).attr("y",195).attr("width",80).attr("height",20).attr("fill","#FFD700");svg.append("rect").attr("x",1120).attr("y",215).attr("width",80).attr("height",20).attr("fill","#FF7F00");svg.append("rect").attr("x",1120).attr("y",235).attr("width",80).attr("height",20).attr("fill","#EE0000");svg.append("rect").attr("x",1120).attr("y",255).attr("width",80).attr("height",20).attr("fill","#8B0000");svg.append("text").attr("x",1128).attr("y",150).text("Legenda").attr("font-family","Tahoma").attr("fill","#666");svg.append("text").attr("x",1153).attr("y",170).text("A").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",190).text("B").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",210).text("C").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",230).text("D").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",250).text("E").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",270).text("F").attr("font-family","Tahoma").attr("font-size","14").attr("fill","#fff");svg.append("text").attr("x",20).attr("y",30).text("Juatuba -> São Sebastião do Paraíso").attr("font-family","Tahoma").attr("font-size","28").attr("fill","#666");svg.append("text").text("Juatuba").attr("transform",function(e){return"translate(25,230)rotate(270)"});svg.append("text").text("Mateus Leme").attr("transform",function(e){return"translate(40,248)rotate(270)"});svg.append("text").text("Itaúna").attr("transform",function(e){return"translate(102,222)rotate(270)"});svg.append("text").text("Igaratinga").attr("transform",function(e){return"translate(212,234)rotate(270)"});svg.append("text").text("Carmo do Cajuru").attr("transform",function(e){return"translate(228,260)rotate(270)"});svg.append("text").text("Divinópolis").attr("transform",function(e){return"translate(255,240)rotate(270)"});svg.append("text").text("São Sebastião do Oeste").attr("transform",function(e){return"translate(341,280)rotate(270)"});svg.append("text").text("Pedra do Indaiá").attr("transform",function(e){return"translate(385,260)rotate(270)"});svg.append("text").text("Formiga").attr("transform",function(e){return"translate(480,230)rotate(270)"});svg.append("text").text("Córrego Fundo").attr("transform",function(e){return"translate(548,250)rotate(270)"});svg.append("text").text("Formiga").attr("transform",function(e){return"translate(572,230)rotate(270)"});svg.append("text").text("Pains").attr("transform",function(e){return"translate(620,220)rotate(270)"});svg.append("text").text("Pimenta").attr("transform",function(e){return"translate(635,230)rotate(270)"});svg.append("text").text("Piumhí").attr("transform",function(e){return"translate(668,225)rotate(270)"});svg.append("text").text("Capitólio").attr("transform",function(e){return"translate(755,230)rotate(270)"});svg.append("text").text("São João Batista do Glória").attr("transform",function(e){return"translate(821,290)rotate(270)"});svg.append("text").text("Alpinópolis").attr("transform",function(e){return"translate(845,240)rotate(270)"});svg.append("text").text("Passos").attr("transform",function(e){return"translate(860,225)rotate(270)"});svg.append("text").text("Itaú de Minas").attr("transform",function(e){return"translate(960,240)rotate(270)"});svg.append("text").text("Pratápolis").attr("transform",function(e){return"translate(985,225)rotate(270)"});svg.append("text").text("Fortaleza de Minas").attr("transform",function(e){return"translate(1002,260)rotate(270)"});svg.append("text").text("Pratápolis").attr("transform",function(e){return"translate(1020,230)rotate(270)"});svg.append("text").text("São Sebastião do Paraíso").attr("transform",function(e){return"translate(1040,290)rotate(270)"});svg.append("text").text("São Sebastião do Paraíso").attr("transform",function(e){return"translate(1108,290)rotate(270)"})}function createScaleX(){var e={top:110,right:100,bottom:100,left:20},t=1205-e.left-e.right,n=500-e.top-e.bottom;var r=d3.scale.ordinal().rangePoints([0,t]);var i=d3.svg.axis().scale(r).orient("bottom");var s=d3.select("svg").append("svg").attr("width",t+e.left+e.right).attr("height",n+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");s.append("g").attr("class","x axis").call(i)}function createRectsY(e){var t=d3.scale.linear().domain([1,e.length]).range([0,width-120]);svg.append("text").attr("x",20).attr("y",450).text("São Sebastião do Paraíso -> Juatuba").attr("font-family","Tahoma").attr("font-size","28").attr("fill","#666");svg.append("text").text("Juatuba").attr("transform",function(e){return"translate(25,230)rotate(270)"});svg.append("text").text("Mateus Leme").attr("transform",function(e){return"translate(40,248)rotate(270)"});svg.append("text").text("Itaúna").attr("transform",function(e){return"translate(102,222)rotate(270)"});svg.append("text").text("Igaratinga").attr("transform",function(e){return"translate(212,234)rotate(270)"});svg.append("text").text("Carmo do Cajuru").attr("transform",function(e){return"translate(228,260)rotate(270)"});svg.append("text").text("Divinópolis").attr("transform",function(e){return"translate(255,240)rotate(270)"});svg.append("text").text("São Sebastião do Oeste").attr("transform",function(e){return"translate(341,280)rotate(270)"});svg.append("text").text("Pedra do Indaiá").attr("transform",function(e){return"translate(385,260)rotate(270)"});svg.append("text").text("Formiga").attr("transform",function(e){return"translate(480,230)rotate(270)"});svg.append("text").text("Córrego Fundo").attr("transform",function(e){return"translate(548,250)rotate(270)"});svg.append("text").text("Formiga").attr("transform",function(e){return"translate(572,230)rotate(270)"});svg.append("text").text("Pains").attr("transform",function(e){return"translate(620,220)rotate(270)"});svg.append("text").text("Pimenta").attr("transform",function(e){return"translate(635,230)rotate(270)"});svg.append("text").text("Piumhí").attr("transform",function(e){return"translate(668,225)rotate(270)"});svg.append("text").text("Capitólio").attr("transform",function(e){return"translate(755,230)rotate(270)"});svg.append("text").text("São João Batista do Glória").attr("transform",function(e){return"translate(821,290)rotate(270)"});svg.append("text").text("Alpinópolis").attr("transform",function(e){return"translate(845,240)rotate(270)"});svg.append("text").text("Passos").attr("transform",function(e){return"translate(860,225)rotate(270)"});svg.append("text").text("Itaú de Minas").attr("transform",function(e){return"translate(960,240)rotate(270)"});svg.append("text").text("Pratápolis").attr("transform",function(e){return"translate(985,225)rotate(270)"});svg.append("text").text("Fortaleza de Minas").attr("transform",function(e){return"translate(1002,260)rotate(270)"});svg.append("text").text("Pratápolis").attr("transform",function(e){return"translate(1020,230)rotate(270)"});svg.append("text").text("São Sebastião do Paraíso").attr("transform",function(e){return"translate(1040,290)rotate(270)"});svg.append("text").text("São Sebastião do Paraíso").attr("transform",function(e){return"translate(1108,290)rotate(270)"})}function createScaleY(){var e={top:310,right:100,bottom:100,left:20},t=1205-e.left-e.right,n=500-e.top-e.bottom;var r=d3.scale.ordinal().rangePoints([0,t]);var i=d3.svg.axis().scale(r).orient("top");var s=d3.select("svg").append("svg").attr("width",t+e.left+e.right).attr("height",n+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");s.append("g").attr("class","x axis").call(i)}var width=1200,height=800;var svg=d3.select(".container").append("svg").attr("width",width).attr("height",height);var div=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);var dataset=[];d3.csv("/data/AB.csv",function(e){dataset=e.map(function(e){return[e["trecho"],e["subsegmento"],e["cidade"],e["km_ini"],e["km_final"],e["pista"],e["nivel"]]});createRectsX(dataset)});var dataset=[];d3.csv("/data/BA.csv",function(e){dataset=e.map(function(e){return[e["trecho"],e["subsegmento"],e["cidade"],e["km_ini"],e["km_final"],e["pista"],e["nivel"]]});createRectsY(dataset)})