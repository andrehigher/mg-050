function createRectsX(e){var t=d3.scale.linear().domain([1,e.length]).range([0,width-120]);createScaleX();createScaleRoads();svg1.append("text").attr("x",1115).attr("y",75).text("S. Sebastião").attr("fill","#666");svg1.append("line").attr("x1",1155).attr("y1",25).attr("x2",1155).attr("y2",61).attr("stroke-width",3).attr("stroke","#666");svg1.append("line").attr("x1",1145).attr("y1",45).attr("x2",1155).attr("y2",60).attr("stroke-width",3).attr("stroke","#666");svg1.append("line").attr("x1",1165).attr("y1",45).attr("x2",1155).attr("y2",60).attr("stroke-width",3).attr("stroke","#666");svg1.append("text").attr("x",1130).attr("y",20).text("Juatuba").attr("fill","#666");svg1.selectAll("rect").data(e).enter().append("rect").attr("x",function(e){return t(e[1])+20}).attr("y",0).attr("width",function(n){return t(width/e.length)-15}).attr("height",100).attr("fill",function(e){if(e[6]==="A"){return"rgb(26,152,80)"}if(e[6]==="B"){return"rgb(217,239,139)"}if(e[6]==="C"){return"rgb(254,224,139)"}if(e[6]==="D"){return"rgb(252,141,89)"}if(e[6]==="E"){return"rgb(215,48,39)"}if(e[6]==="F"){return"#8B0000"}}).on("mouseover",function(e){return tooltip.style("visibility","visible").attr("class","ttip border-"+e[6].toLowerCase()).text(e[3]+"km à "+e[4]+"km").append("h3").text(e[5])}).on("mousemove",function(){return tooltip.style("top",event.pageY-10+"px").style("left",event.pageX+10+"px")}).on("mouseout",function(){return tooltip.style("visibility","hidden")})}function createScaleX(){var e={top:230,right:100,bottom:100,left:20},t=1205-e.left-e.right,n=500-e.top-e.bottom;var r=d3.scale.ordinal().domain(["57km","100km","150km","200km","250km","300km","350km","400km","660km"]).range([0,175,363,510,653,770,885,1033,t]);var i=d3.svg.axis().scale(r).orient("top");var s=d3.select("svg").append("svg").attr("width",t+e.left+e.right).attr("height",n+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");s.append("g").attr("class","x axis").call(i)}function createScaleRoads(){var e={top:200,right:100,bottom:100,left:20},t=1205-e.left-e.right,n=500-e.top-e.bottom;var r=d3.scale.ordinal().domain(["MG-050","BR-491","BR-265"]).range([0,1033,t]);var i=d3.svg.axis().scale(r).orient("top");var s=d3.select("svg").append("svg").attr("width",t+e.left+e.right).attr("height",n+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");s.append("g").attr("class","x axis").call(i)}function createRectsY(e){var t=d3.scale.linear().domain([1,e.length]).range([0,width-120]);svg2.append("text").attr("x",1115).attr("y",20).text("S. Sebastião").attr("fill","#666");svg2.append("line").attr("x1",1155).attr("y1",25).attr("x2",1155).attr("y2",61).attr("stroke-width",3).attr("stroke","#666");svg2.append("line").attr("x1",1145).attr("y1",45).attr("x2",1155).attr("y2",60).attr("stroke-width",3).attr("stroke","#666");svg2.append("line").attr("x1",1165).attr("y1",45).attr("x2",1155).attr("y2",60).attr("stroke-width",3).attr("stroke","#666");svg2.append("text").attr("x",1130).attr("y",75).text("Juatuba").attr("fill","#666");svg2.selectAll("rect").data(e).enter().append("rect").attr("x",function(e){return t(e[1])+20}).attr("y",0).attr("width",function(n){return t(width/e.length)-15}).attr("height",100).attr("fill",function(e){if(e[6]==="A"){return"rgb(26,152,80)"}if(e[6]==="B"){return"rgb(217,239,139)"}if(e[6]==="C"){return"rgb(254,224,139)"}if(e[6]==="D"){return"rgb(252,141,89)"}if(e[6]==="E"){return"rgb(215,48,39)"}if(e[6]==="F"){return"#8B0000"}}).on("mouseover",function(e){return tooltip.style("visibility","visible").attr("class","ttip border-"+e[6].toLowerCase()).text(e[3]+"km à "+e[4]+"km").append("h3").text(e[5])}).on("mousemove",function(){return tooltip.style("top",event.pageY-10+"px").style("left",event.pageX+10+"px")}).on("mouseout",function(){return tooltip.style("visibility","hidden")})}function createLegend(){var e=55;var t=70;svg.append("rect").attr("x",1120).attr("y",e).attr("width",80).attr("height",20).attr("fill","rgb(26,152,80)");svg.append("rect").attr("x",1120).attr("y",e+20).attr("width",80).attr("height",20).attr("fill","rgb(217,239,139)");svg.append("rect").attr("x",1120).attr("y",e+40).attr("width",80).attr("height",20).attr("fill","rgb(254,224,139)");svg.append("rect").attr("x",1120).attr("y",e+60).attr("width",80).attr("height",20).attr("fill","rgb(252,141,89)");svg.append("rect").attr("x",1120).attr("y",e+80).attr("width",80).attr("height",20).attr("fill","rgb(215,48,39)");svg.append("rect").attr("x",1120).attr("y",e+100).attr("width",80).attr("height",20).attr("fill","#8B0000");svg.append("text").attr("x",1132).attr("y",30).text("Nível de").attr("fill","#666");svg.append("text").attr("x",1134).attr("y",45).text("Serviço").attr("fill","#666");svg.append("text").attr("x",1153).attr("y",t).text("A").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",t+20).text("B").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",t+40).text("C").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",t+60).text("D").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",t+80).text("E").attr("font-family","Tahoma").attr("font-size","14");svg.append("text").attr("x",1153).attr("y",t+100).text("F").attr("font-family","Tahoma").attr("font-size","14").attr("fill","#fff");svg.append("text").text("Juatuba").attr("transform",function(e){return"translate(25,170)rotate(270)"});svg.append("text").text("Mateus Leme").attr("transform",function(e){return"translate(40,170)rotate(270)"});svg.append("text").text("Itaúna").attr("transform",function(e){return"translate(102,170)rotate(270)"});svg.append("text").text("Igaratinga").attr("transform",function(e){return"translate(212,170)rotate(270)"});svg.append("text").text("Carmo do Cajuru").attr("transform",function(e){return"translate(228,170)rotate(270)"});svg.append("text").text("Divinópolis").attr("transform",function(e){return"translate(255,170)rotate(270)"});svg.append("text").text("São Sebastião do Oeste").attr("transform",function(e){return"translate(341,170)rotate(270)"});svg.append("text").text("Pedra do Indaiá").attr("transform",function(e){return"translate(385,170)rotate(270)"});svg.append("text").text("Formiga").attr("transform",function(e){return"translate(480,170)rotate(270)"});svg.append("text").text("Córrego Fundo").attr("transform",function(e){return"translate(548,170)rotate(270)"});svg.append("text").text("Formiga").attr("transform",function(e){return"translate(572,170)rotate(270)"});svg.append("text").text("Pains").attr("transform",function(e){return"translate(620,170)rotate(270)"});svg.append("text").text("Pimenta").attr("transform",function(e){return"translate(635,170)rotate(270)"});svg.append("text").text("Piumhí").attr("transform",function(e){return"translate(668,170)rotate(270)"});svg.append("text").text("Capitólio").attr("transform",function(e){return"translate(755,170)rotate(270)"});svg.append("text").text("São João Batista do Glória").attr("transform",function(e){return"translate(821,170)rotate(270)"});svg.append("text").text("Alpinópolis").attr("transform",function(e){return"translate(845,170)rotate(270)"});svg.append("text").text("Passos").attr("transform",function(e){return"translate(860,170)rotate(270)"});svg.append("text").text("Itaú de Minas").attr("transform",function(e){return"translate(960,170)rotate(270)"});svg.append("text").text("Pratápolis").attr("transform",function(e){return"translate(985,170)rotate(270)"});svg.append("text").text("Fortaleza de Minas").attr("transform",function(e){return"translate(1002,170)rotate(270)"});svg.append("text").text("Pratápolis").attr("transform",function(e){return"translate(1020,170)rotate(270)"});svg.append("text").text("São Sebastião do Paraíso").attr("transform",function(e){return"translate(1040,170)rotate(270)"});svg.append("text").text("São Sebastião do Paraíso").attr("transform",function(e){return"translate(1108,170)rotate(270)"})}var width=1200,height=300;var svg=d3.select(".container").append("svg").attr("width",width).attr("height",240);var svg1=d3.select(".container").append("svg").attr("width",width).attr("height",130);var svg2=d3.select(".container").append("svg").attr("width",width).attr("height",100);var tooltip=d3.select("body").append("div").style("position","absolute").style("z-index","100").style("visibility","hidden");createLegend();var dataset=[];d3.csv("/data/AB.csv",function(e){dataset=e.map(function(e){return[e.trecho,e.subsegmento,e.cidade,e.km_ini,e.km_final,e.pista,e.nivel]});createRectsX(dataset)});var dataset=[];d3.csv("/data/BA.csv",function(e){dataset=e.map(function(e){return[e.trecho,e.subsegmento,e.cidade,e.km_ini,e.km_final,e.pista,e.nivel]});createRectsY(dataset)});